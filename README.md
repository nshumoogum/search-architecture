# search-architecture

TODO description

### Sequence Diagrams

#### Add/update search documents when a collection is published

[![](https://mermaid.ink/img/eyJjb2RlIjoic2VxdWVuY2VEaWFncmFtXG7CoMKgwqDCoFplYmVkZWUtLT4-K1NlYXJjaMKgRGF0YcKgRXh0cmFjdG9yOsKgMSnCoFRDUDrCoEthZmthwqBtZXNzYWdlXG7CoMKgwqDCoFNlYXJjaMKgRGF0YcKgRXh0cmFjdG9yLT4-WmViZWRlZTrCoDIpIEhUVFBTOsKgUmV0cmlldmXCoGRvY3PCoGZyb23CoGNvbGxlY3Rpb25cbsKgwqDCoMKgWmViZWRlZS0-PlplYmVkZWXCoENvbnRlbnQ6wqAzKcKgSS9POsKgUkVBRMKgSlNPTsKgZmlsZcKgZnJvbcKgZGlzY1xuwqDCoMKgwqBTZWFyY2jCoERhdGHCoEV4dHJhY3Rvci0-PitEYXRhc2V0wqBBUEk6wqA0KSBIVFRQUzrCoEdFVMKgZGF0YXNldMKgZG9jc8KgZm9ywqBjb2xsZWN0aW9uXG7CoMKgwqDCoERhdGFzZXTCoEFQSS0-PitNb25nb0RCOsKgNSnCoFRDUC9JT8Kgc29ja2V0OsKgRmluZMKgYWxswqBkYXRhc2V0c8KgZm9ywqBjb2xsZWN0aW9uXG7CoMKgwqDCoFNlYXJjaMKgRGF0YcKgRXh0cmFjdG9yLS0-PitTZWFyY2jCoEJ1aWxkZXI6wqA3KcKgVENQOsKgS2Fma2HCoG1lc3NhZ2VcbsKgwqDCoMKgU2VhcmNowqBCdWlsZGVyLT4-K0VsYXN0aWNTZWFyY2g6wqA4KSBIVFRQUzrCoEdFVMKgTXVsdGktb3BlcmF0aW9uYWwgcmVxdWVzdCB0byB1cGRhdGUvYWRkIGRvY3MgIiwibWVybWFpZCI6eyJ0aGVtZSI6ImRlZmF1bHQifSwidXBkYXRlRWRpdG9yIjpmYWxzZX0)](https://mermaid-js.github.io/mermaid-live-editor/#/edit/eyJjb2RlIjoic2VxdWVuY2VEaWFncmFtXG7CoMKgwqDCoFplYmVkZWUtLT4-K1NlYXJjaMKgRGF0YcKgRXh0cmFjdG9yOsKgMSnCoFRDUDrCoEthZmthwqBtZXNzYWdlXG7CoMKgwqDCoFNlYXJjaMKgRGF0YcKgRXh0cmFjdG9yLT4-WmViZWRlZTrCoDIpIEhUVFBTOsKgUmV0cmlldmXCoGRvY3PCoGZyb23CoGNvbGxlY3Rpb25cbsKgwqDCoMKgWmViZWRlZS0-PlplYmVkZWXCoENvbnRlbnQ6wqAzKcKgSS9POsKgUkVBRMKgSlNPTsKgZmlsZcKgZnJvbcKgZGlzY1xuwqDCoMKgwqBTZWFyY2jCoERhdGHCoEV4dHJhY3Rvci0-PitEYXRhc2V0wqBBUEk6wqA0KSBIVFRQUzrCoEdFVMKgZGF0YXNldMKgZG9jc8KgZm9ywqBjb2xsZWN0aW9uXG7CoMKgwqDCoERhdGFzZXTCoEFQSS0-PitNb25nb0RCOsKgNSnCoFRDUC9JT8Kgc29ja2V0OsKgRmluZMKgYWxswqBkYXRhc2V0c8KgZm9ywqBjb2xsZWN0aW9uXG7CoMKgwqDCoFNlYXJjaMKgRGF0YcKgRXh0cmFjdG9yLS0-PitTZWFyY2jCoEJ1aWxkZXI6wqA3KcKgVENQOsKgS2Fma2HCoG1lc3NhZ2VcbsKgwqDCoMKgU2VhcmNowqBCdWlsZGVyLT4-K0VsYXN0aWNTZWFyY2g6wqA4KSBIVFRQUzrCoEdFVMKgTXVsdGktb3BlcmF0aW9uYWwgcmVxdWVzdCB0byB1cGRhdGUvYWRkIGRvY3MgIiwibWVybWFpZCI6eyJ0aGVtZSI6ImRlZmF1bHQifSwidXBkYXRlRWRpdG9yIjpmYWxzZX0)

#### Reindex

[![](https://mermaid.ink/img/eyJjb2RlIjoic2VxdWVuY2VEaWFncmFtXG4gICAgRFAgRGV2ZWxvcGVyLT4-K1NlYXJjaCBSZWluZGV4IEFQSTogMSkgSFRUUFM6IFBPU1QgUmVpbmRleCBqb2JcbiAgICBTZWFyY2ggUmVpbmRleCBBUEktPj4rTW9uZ29EQjogMikgVENQL0lPIHNvY2tldDogUmV0cmlldmUgbGlzdCBvZiBqb2JzIHN0YXR1cyBpbi1wcm9ncmVzc1xuICAgIFNlYXJjaCBSZWluZGV4IEFQSS0-Pk1vbmdvREI6IDMpIFRDUC9JTyBzb2NrZXQ6IENyZWF0ZSBuZXcgam9iIGRvY1xuICAgIFNlYXJjaCBSZWluZGV4IEFQSS0-PitFbGFzdGljc2VhcmNoOiA0KSBIVFRQUzogQ3JlYXRlIG5ldyBzaXRld2lkZSAoT05TKSBzZWFyY2ggaW5kZXhcbiAgICBTZWFyY2ggUmVpbmRleCBBUEktPj4rR28gcm91dGluZTogNSkgR28gcm91dGluZSB0byBjcmVhdGUgZXZlbnRzIGZvciBhbGwgY29sbGVjdGlvbnNcbiAgICBTZWFyY2ggUmVpbmRleCBBUEktPj5EUCBEZXZlbG9wZXI6IDYpIEhUVFBTIFN1Y2Nlc3NmdWwgcmVzcG9uc2U6IFxuICAgIEdvIHJvdXRpbmUtPj4rWmViZWRlZTogNykgSFRUUFM6IFJldHJpZXZlIGxpc3Qgb2YgY29sbGVjdGlvbnNcbiAgICBHbyByb3V0aW5lLT4-TW9uZ29EQjogOCkgVENQL0lPIHNvY2tldDogVXBkYXRlIHJlaW5kZXggam9iXG4gICAgR28gcm91dGluZS0tPj5TZWFyY2ggRGF0YSBFeHRyYWN0b3I6IDkpIFRDUDogS2Fma2EgbWVzc2FnZVxuICAgIFNlYXJjaMKgRGF0YcKgRXh0cmFjdG9yLT4-WmViZWRlZTrCoDEwKSBIVFRQUzrCoEdFVMKgRG9jc8KgZnJvbcKgY29sbGVjdGlvblxuwqDCoMKgwqBaZWJlZGVlLT4-WmViZWRlZcKgQ29udGVudDrCoDExKcKgSS9POsKgUkVBRMKgSlNPTsKgZmlsZcKgZnJvbcKgZGlzY1xuICAgIFNlYXJjaMKgRGF0YcKgRXh0cmFjdG9yLT4-RGF0YXNldMKgQVBJOsKgMTIpIEhUVFBTOsKgR0VUwqBDTUQgZGF0YXNldMKgZG9jc8KgZm9ywqBjb2xsZWN0aW9uXG4gICAgRGF0YXNldMKgQVBJLT4-K01vbmdvREI6wqAxMynCoFRDUC9JT8Kgc29ja2V0OsKgRmluZMKgYWxswqBkYXRhc2V0c8KgZm9ywqBjb2xsZWN0aW9uXG7CoMKgwqDCoFNlYXJjaMKgRGF0YcKgRXh0cmFjdG9yLS0-PitTZWFyY2jCoEJ1aWxkZXI6wqAxNCnCoFRDUDrCoEthZmthwqBtZXNzYWdlXG7CoMKgwqDCoFNlYXJjaMKgQnVpbGRlci0-PkVsYXN0aWNTZWFyY2g6wqAxNSkgSFRUUFM6wqBCdWxrIHF1ZXJ5XG4gICAgU2VhcmNowqBCdWlsZGVyLT4-U2VhcmNoIFJlaW5kZXggQVBJOsKgMTYpwqBIVFRQUzrCoFVwZGF0ZSByZWluZGV4IGpvYiBkb2MgY291bnRcbiAgICBTZWFyY2ggUmVpbmRleCBBUEktPj5Nb25nb0RCOiAxNykgVENQL0lPIHNvY2tldDogVXBkYXRlIGpvYiBkb2NcbiAgICBTZWFyY2ggUmVpbmRleCBBUEktPj5FbGFzdGljc2VhcmNoOiAxOCkgSFRUUFM6IFZhbGlkYXRlIHNlYXJjaCBpbmRleCBkb2N1bWVudCBjb3VudFxuICAgIFNlYXJjaCBSZWluZGV4IEFQSS0-PkVsYXN0aWNzZWFyY2g6IDE5KSBIVFRQUzogTXVsdGktb3BlcmF0aW9uYWwgcmVxdWVzdCB0byB1cGRhdGUgYWxpYXNlcyBcbiAgICBTZWFyY2ggUmVpbmRleCBBUEktPj5Nb25nb0RCOiAxOSkgVENQL0lPIHNvY2tldDogVXBkYXRlIHJlaW5kZXggam9iIHN0YXRlIHRvIGNvbXBsZXRlZFxuICAgICIsIm1lcm1haWQiOnsidGhlbWUiOiJkZWZhdWx0In0sInVwZGF0ZUVkaXRvciI6ZmFsc2V9)](https://mermaid-js.github.io/mermaid-live-editor/#/edit/eyJjb2RlIjoic2VxdWVuY2VEaWFncmFtXG4gICAgRFAgRGV2ZWxvcGVyLT4-K1NlYXJjaCBSZWluZGV4IEFQSTogMSkgSFRUUFM6IFBPU1QgUmVpbmRleCBqb2JcbiAgICBTZWFyY2ggUmVpbmRleCBBUEktPj4rTW9uZ29EQjogMikgVENQL0lPIHNvY2tldDogUmV0cmlldmUgbGlzdCBvZiBqb2JzIHN0YXR1cyBpbi1wcm9ncmVzc1xuICAgIFNlYXJjaCBSZWluZGV4IEFQSS0-Pk1vbmdvREI6IDMpIFRDUC9JTyBzb2NrZXQ6IENyZWF0ZSBuZXcgam9iIGRvY1xuICAgIFNlYXJjaCBSZWluZGV4IEFQSS0-PitFbGFzdGljc2VhcmNoOiA0KSBIVFRQUzogQ3JlYXRlIG5ldyBzaXRld2lkZSAoT05TKSBzZWFyY2ggaW5kZXhcbiAgICBTZWFyY2ggUmVpbmRleCBBUEktPj4rR28gcm91dGluZTogNSkgR28gcm91dGluZSB0byBjcmVhdGUgZXZlbnRzIGZvciBhbGwgY29sbGVjdGlvbnNcbiAgICBTZWFyY2ggUmVpbmRleCBBUEktPj5EUCBEZXZlbG9wZXI6IDYpIEhUVFBTIFN1Y2Nlc3NmdWwgcmVzcG9uc2U6IFxuICAgIEdvIHJvdXRpbmUtPj4rWmViZWRlZTogNykgSFRUUFM6IFJldHJpZXZlIGxpc3Qgb2YgY29sbGVjdGlvbnNcbiAgICBHbyByb3V0aW5lLT4-TW9uZ29EQjogOCkgVENQL0lPIHNvY2tldDogVXBkYXRlIHJlaW5kZXggam9iXG4gICAgR28gcm91dGluZS0tPj5TZWFyY2ggRGF0YSBFeHRyYWN0b3I6IDkpIFRDUDogS2Fma2EgbWVzc2FnZVxuICAgIFNlYXJjaMKgRGF0YcKgRXh0cmFjdG9yLT4-WmViZWRlZTrCoDEwKSBIVFRQUzrCoEdFVMKgRG9jc8KgZnJvbcKgY29sbGVjdGlvblxuwqDCoMKgwqBaZWJlZGVlLT4-WmViZWRlZcKgQ29udGVudDrCoDExKcKgSS9POsKgUkVBRMKgSlNPTsKgZmlsZcKgZnJvbcKgZGlzY1xuICAgIFNlYXJjaMKgRGF0YcKgRXh0cmFjdG9yLT4-RGF0YXNldMKgQVBJOsKgMTIpIEhUVFBTOsKgR0VUwqBDTUQgZGF0YXNldMKgZG9jc8KgZm9ywqBjb2xsZWN0aW9uXG4gICAgRGF0YXNldMKgQVBJLT4-K01vbmdvREI6wqAxMynCoFRDUC9JT8Kgc29ja2V0OsKgRmluZMKgYWxswqBkYXRhc2V0c8KgZm9ywqBjb2xsZWN0aW9uXG7CoMKgwqDCoFNlYXJjaMKgRGF0YcKgRXh0cmFjdG9yLS0-PitTZWFyY2jCoEJ1aWxkZXI6wqAxNCnCoFRDUDrCoEthZmthwqBtZXNzYWdlXG7CoMKgwqDCoFNlYXJjaMKgQnVpbGRlci0-PkVsYXN0aWNTZWFyY2g6wqAxNSkgSFRUUFM6wqBCdWxrIHF1ZXJ5XG4gICAgU2VhcmNowqBCdWlsZGVyLT4-U2VhcmNoIFJlaW5kZXggQVBJOsKgMTYpwqBIVFRQUzrCoFVwZGF0ZSByZWluZGV4IGpvYiBkb2MgY291bnRcbiAgICBTZWFyY2ggUmVpbmRleCBBUEktPj5Nb25nb0RCOiAxNykgVENQL0lPIHNvY2tldDogVXBkYXRlIGpvYiBkb2NcbiAgICBTZWFyY2ggUmVpbmRleCBBUEktPj5FbGFzdGljc2VhcmNoOiAxOCkgSFRUUFM6IFZhbGlkYXRlIHNlYXJjaCBpbmRleCBkb2N1bWVudCBjb3VudFxuICAgIFNlYXJjaCBSZWluZGV4IEFQSS0-PkVsYXN0aWNzZWFyY2g6IDE5KSBIVFRQUzogTXVsdGktb3BlcmF0aW9uYWwgcmVxdWVzdCB0byB1cGRhdGUgYWxpYXNlcyBcbiAgICBTZWFyY2ggUmVpbmRleCBBUEktPj5Nb25nb0RCOiAxOSkgVENQL0lPIHNvY2tldDogVXBkYXRlIHJlaW5kZXggam9iIHN0YXRlIHRvIGNvbXBsZXRlZFxuICAgICIsIm1lcm1haWQiOnsidGhlbWUiOiJkZWZhdWx0In0sInVwZGF0ZUVkaXRvciI6ZmFsc2V9)